
The Rendering System in XOOPSCube Legacy (XCL) employs a sophisticated approach with multiple render targets to generate the HTML output from templates and content. It provides a flexible, template-based mechanism to transform application data into frontend themes and the admin backend web pages through the integration of a Smarty template engine with XCL's theme system. 

This document covers the architecture, components, and processes of the rendering system.

## Architecture Overview

The XCL Rendering System is built around several key components that work together to produce the final HTML output. This includes the render system itself, render targets, the template engine, themes, and caching mechanisms.


<p align="center">
<svg xmlns="http://www.w3.org/2000/svg" id="xcl_legacy_render" aria-roledescription="class" class="xcl-diagram" style="max-width:1163.5625px" viewBox="0 0 1163.563 860"><defs><marker id="xcl_legacy_render_class-aggregationStart" class="marker aggregation class" markerHeight="240" markerWidth="190" orient="auto" refX="18" refY="7"><path d="m18 7-9 6-8-6 8-6Z"/></marker></defs><defs><marker id="xcl_legacy_render_class-aggregationEnd" class="marker aggregation class" markerHeight="28" markerWidth="20" orient="auto" refX="1" refY="7"><path d="m18 7-9 6-8-6 8-6Z"/></marker></defs><defs><marker id="xcl_legacy_render_class-extensionStart" class="marker extension class" markerHeight="240" markerWidth="190" orient="auto" refX="18" refY="7"><path d="m1 7 17 6V1Z"/></marker></defs><defs><marker id="xcl_legacy_render_class-extensionEnd" class="marker extension class" markerHeight="28" markerWidth="20" orient="auto" refX="1" refY="7"><path d="M1 1v12l17-6Z"/></marker></defs><defs><marker id="xcl_legacy_render_class-compositionStart" class="marker composition class" markerHeight="240" markerWidth="190" orient="auto" refX="18" refY="7"><path d="m18 7-9 6-8-6 8-6Z"/></marker></defs><defs><marker id="xcl_legacy_render_class-compositionEnd" class="marker composition class" markerHeight="28" markerWidth="20" orient="auto" refX="1" refY="7"><path d="m18 7-9 6-8-6 8-6Z"/></marker></defs><defs><marker id="xcl_legacy_render_class-dependencyStart" class="marker dependency class" markerHeight="240" markerWidth="190" orient="auto" refX="6" refY="7"><path d="m5 7 4 6-8-6 8-6Z"/></marker></defs><defs><marker id="xcl_legacy_render_class-dependencyEnd" class="marker dependency class" markerHeight="28" markerWidth="20" orient="auto" refX="13" refY="7"><path d="m18 7-9 6 5-6-5-6Z"/></marker></defs><defs><marker id="xcl_legacy_render_class-lollipopStart" class="marker lollipop class" markerHeight="240" markerWidth="190" orient="auto" refX="13" refY="7"><circle cx="7" cy="7" r="6" fill="transparent" stroke="#000"/></marker></defs><defs><marker id="xcl_legacy_render_class-lollipopEnd" class="marker lollipop class" markerHeight="240" markerWidth="190" orient="auto" refX="1" refY="7"><circle cx="7" cy="7" r="6" fill="transparent" stroke="#000"/></marker></defs><g class="root"><g class="edgePaths"><path id="id_XCube_RenderSystem_Legacy_RenderSystem_1" marker-start="url(#xcl_legacy_render_class-extensionStart)" d="M424.788 221v77" class="edge-thickness-normal edge-pattern-solid relation"/><path id="id_XCube_RenderTarget_Legacy_RenderTarget_2" marker-start="url(#xcl_legacy_render_class-extensionStart)" d="M898.314 266v128" class="edge-thickness-normal edge-pattern-solid relation"/><path id="id_Legacy_RenderTarget_Legacy_ThemeRenderTarget_3" marker-start="url(#xcl_legacy_render_class-extensionStart)" d="m842.276 528.376-14.896 19.771c-14.896 19.77-44.688 59.312-59.584 89.249-14.896 29.937-14.896 50.271-14.896 60.437V708" class="edge-thickness-normal edge-pattern-solid relation"/><path id="id_Legacy_RenderTarget_Legacy_RenderTargetMain_4" marker-start="url(#xcl_legacy_render_class-extensionStart)" d="m954.352 528.376 14.896 19.771c14.896 19.77 44.688 59.312 59.584 89.249 14.896 29.937 14.896 50.271 14.896 60.437V708" class="edge-thickness-normal edge-pattern-solid relation"/><path id="id_XoopsTpl_Legacy_XoopsTpl_5" marker-start="url(#xcl_legacy_render_class-extensionStart)" d="M104.303 559v14.667c0 14.666 0 44 8.167 64.833 8.166 20.833 24.5 33.167 32.666 39.333l8.167 6.167" class="edge-thickness-normal edge-pattern-solid relation"/><path id="id_Legacy_RenderSystem_Legacy_XoopsTpl_6" marker-end="url(#xcl_legacy_render_class-dependencyEnd)" d="M424.788 610v6.167c0 6.166 0 18.5-7.369 30.23-7.369 11.731-22.106 22.859-29.474 28.423l-7.369 5.564" class="edge-thickness-normal edge-pattern-solid relation"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="0" height="24" class="label" transform="translate(0 -12)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel" style="display:inline-block"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="24" class="label" transform="translate(0 -12)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel" style="display:inline-block"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="24" class="label" transform="translate(0 -12)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel" style="display:inline-block"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="24" class="label" transform="translate(0 -12)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel" style="display:inline-block"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="24" class="label" transform="translate(0 -12)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel" style="display:inline-block"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="31" height="24" class="label" transform="translate(409.288 635)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel" style="display:inline-block"><p>uses</p></span></div></foreignObject></g></g><g class="nodes"><g id="classId-XCube_RenderSystem-81" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-124.172-75h248.344V75h-248.344" transform="translate(424.788 128)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-124.172-75h248.344m-248.344 0h248.344m0 0V75m0-150V75m0 0h-248.344m248.344 0h-248.344m0 0V-75m0 150V-75" transform="translate(424.788 128)"/></g><g class="label-group text"><foreignObject width="162.137" height="24" class="label" style="font-weight:bolder" transform="translate(343.719 65)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:214px;text-align:center"><span class="nodeLabel markdown-node-label"><p>XCube_RenderSystem</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="143.275" height="24" class="label" transform="translate(312.616 143)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:202px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+prepare(controller)</p></span></div></foreignObject><foreignObject width="109.275" height="24" class="label" transform="translate(312.616 167)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:167px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+render(target)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-124.172-27h248.344m-248.344 0h248.344M-124.172-3h248.344m-248.344 0h248.344" class="divider" transform="translate(424.788 128)"/></g><g id="classId-Legacy_RenderSystem-82" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-174.181-156H174.18v312H-174.18" transform="translate(424.788 454)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-174.181-156H174.18m-348.362 0H174.18m0 0v312m0-312v312m0 0H-174.18m348.362 0H-174.18m0 0v-312m0 312v-312" transform="translate(424.788 454)"/></g><g class="label-group text"><foreignObject width="165.3" height="24" class="label" style="font-weight:bolder" transform="translate(342.138 310)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:219px;text-align:center"><span class="nodeLabel markdown-node-label"><p>Legacy_RenderSystem</p></span></div></foreignObject></g><g class="members-group text"><foreignObject width="212.588" height="24" class="label" transform="translate(262.606 358)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:279px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-mXoopsTpl: Legacy_XoopsTpl</p></span></div></foreignObject><foreignObject width="161.512" height="24" class="label" transform="translate(262.606 382)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:225px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-mThemeRenderTarget</p></span></div></foreignObject><foreignObject width="149" height="24" class="label" transform="translate(262.606 406)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:212px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-mMainRenderTarget</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="109.275" height="24" class="label" transform="translate(262.606 454)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:167px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+render(target)</p></span></div></foreignObject><foreignObject width="147.05" height="24" class="label" transform="translate(262.606 478)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:208px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+renderBlock(target)</p></span></div></foreignObject><foreignObject width="144.713" height="24" class="label" transform="translate(262.606 502)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:202px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+renderMain(target)</p></span></div></foreignObject><foreignObject width="157.238" height="24" class="label" transform="translate(262.606 526)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:215px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+renderTheme(target)</p></span></div></foreignObject><foreignObject width="188.175" height="24" class="label" transform="translate(262.606 550)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:252px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+createRenderTarget(type)</p></span></div></foreignObject><foreignObject width="241.713" height="24" class="label" transform="translate(262.606 574)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:304px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+getThemeRenderTarget(isDialog)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-174.181-108H174.18m-348.362 0H174.18M-174.181-12H174.18m-348.362 0H174.18" class="divider" transform="translate(424.788 454)"/></g><g id="classId-XCube_RenderTarget-83" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-137.566-120h275.132v240h-275.132" transform="translate(898.314 128)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-137.566-120h275.132m-275.132 0h275.132m0 0v240m0-240v240m0 0h-275.132m275.132 0h-275.132m0 0v-240m0 240v-240" transform="translate(898.314 128)"/></g><g class="label-group text"><foreignObject width="156.163" height="24" class="label" style="font-weight:bolder" transform="translate(820.233 20)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:205px;text-align:center"><span class="nodeLabel markdown-node-label"><p>XCube_RenderTarget</p></span></div></foreignObject></g><g class="members-group text"><foreignObject width="132.825" height="24" class="label" transform="translate(772.748 68)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:195px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-mAttributes: array</p></span></div></foreignObject><foreignObject width="110.775" height="24" class="label" transform="translate(772.748 92)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:176px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-mResult: string</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="130.738" height="24" class="label" transform="translate(772.748 140)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:188px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+getAttribute(key)</p></span></div></foreignObject><foreignObject width="173.05" height="24" class="label" transform="translate(772.748 164)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:232px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+setAttribute(key, value)</p></span></div></foreignObject><foreignObject width="86.425" height="24" class="label" transform="translate(772.748 188)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:146px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+getResult()</p></span></div></foreignObject><foreignObject width="122.863" height="24" class="label" transform="translate(772.748 212)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:186px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+setResult(result)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-137.566-72h275.132m-275.132 0h275.132M-137.566 0h275.132m-275.132 0h275.132" class="divider" transform="translate(898.314 128)"/></g><g id="classId-Legacy_RenderTarget-84" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-117.49-60h234.98V60h-234.98" transform="translate(898.314 454)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-117.49-60h234.98m-234.98 0h234.98m0 0V60m0-120V60m0 0h-234.98m234.98 0h-234.98m0 0V-60m0 120V-60" transform="translate(898.314 454)"/></g><g class="label-group text"><foreignObject width="159.313" height="24" class="label" style="font-weight:bolder" transform="translate(818.658 406)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:210px;text-align:center"><span class="nodeLabel markdown-node-label"><p>Legacy_RenderTarget</p></span></div></foreignObject></g><g class="members-group text"><foreignObject width="131.325" height="24" class="label" transform="translate(792.823 454)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:196px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-legacy_buffertype</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-117.49-12h234.98m-234.98 0h234.98M-117.49 36h234.98m-234.98 0h234.98" class="divider" transform="translate(898.314 454)"/></g><g id="classId-Legacy_ThemeRenderTarget-85" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-128.994-60h257.988V60h-257.988" transform="translate(752.9 768)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-128.994-60h257.988m-257.988 0h257.988m0 0V60m0-120V60m0 0h-257.988m257.988 0h-257.988m0 0V-60m0 120V-60" transform="translate(752.9 768)"/></g><g class="label-group text"><foreignObject width="210.3" height="24" class="label" style="font-weight:bolder" transform="translate(647.75 720)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:259px;text-align:center"><span class="nodeLabel markdown-node-label"><p>Legacy_ThemeRenderTarget</p></span></div></foreignObject></g><g class="members-group text"><foreignObject width="128.838" height="24" class="label" transform="translate(635.906 768)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:191px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-isFileTheme: bool</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-128.994-12h257.988m-257.988 0h257.988M-128.994 36h257.988m-257.988 0h257.988" class="divider" transform="translate(752.9 768)"/></g><g id="classId-Legacy_RenderTargetMain-86" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-111.834-60h223.668V60h-223.668" transform="translate(1043.728 768)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-111.834-60h223.668m-223.668 0h223.668m0 0V60m0-120V60m0 0h-223.668m223.668 0h-223.668m0 0V-60m0 120V-60" transform="translate(1043.728 768)"/></g><g class="label-group text"><foreignObject width="197.463" height="24" class="label" style="font-weight:bolder" transform="translate(944.997 720)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:245px;text-align:center"><span class="nodeLabel markdown-node-label"><p>Legacy_RenderTargetMain</p></span></div></foreignObject></g><g class="members-group text"><foreignObject width="100.938" height="24" class="label" transform="translate(943.894 768)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:164px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-stdout_buffer</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-111.834-12h223.668m-223.668 0h223.668M-111.834 36h223.668m-223.668 0h223.668" class="divider" transform="translate(1043.728 768)"/></g><g id="classId-XoopsTpl-87" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-96.303-87H96.303V87H-96.303" transform="translate(104.303 454)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-96.303-87H96.303m-192.606 0H96.303m0 0V87m0-174V87m0 0H-96.303m192.606 0H-96.303m0 0V-87m0 174V-87" transform="translate(104.303 454)"/></g><g class="label-group text"><foreignObject width="69.838" height="24" class="label" style="font-weight:bolder" transform="translate(69.384 379)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:116px;text-align:center"><span class="nodeLabel markdown-node-label"><p>XoopsTpl</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="133.688" height="24" class="label" transform="translate(20 457)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:194px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+assign(key, value)</p></span></div></foreignObject><foreignObject width="118.625" height="24" class="label" transform="translate(20 481)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:179px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+fetch(template)</p></span></div></foreignObject><foreignObject width="132.637" height="24" class="label" transform="translate(20 505)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:192px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+display(template)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-96.303-39H96.303m-192.606 0H96.303M-96.303-15H96.303m-192.606 0H96.303" class="divider" transform="translate(104.303 454)"/></g><g id="classId-Legacy_XoopsTpl-88" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-135.56-84h271.12V84h-271.12" transform="translate(264.545 768)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-135.56-84h271.12m-271.12 0h271.12m0 0V84m0-168V84m0 0h-271.12m271.12 0h-271.12m0 0V-84m0 168V-84" transform="translate(264.545 768)"/></g><g class="label-group text"><foreignObject width="128.113" height="24" class="label" style="font-weight:bolder" transform="translate(200.49 696)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:177px;text-align:center"><span class="nodeLabel markdown-node-label"><p>Legacy_XoopsTpl</p></span></div></foreignObject></g><g class="members-group text"><foreignObject width="135.938" height="24" class="label" transform="translate(140.986 744)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:204px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-_mContextReserve</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="133.688" height="24" class="label" transform="translate(140.986 792)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:194px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+assign(key, value)</p></span></div></foreignObject><foreignObject width="183.063" height="24" class="label" transform="translate(140.986 816)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:250px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+assign_by_ref(key, value)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-135.56-36h271.12m-271.12 0h271.12M-135.56 12h271.12m-271.12 0h271.12" class="divider" transform="translate(264.545 768)"/></g></g></g></svg>
</p>


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L107-L640" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L107-L640</a></code> 
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderTarget.class.php#L10-L96" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderTarget.class.php#L10-L96</a></code>
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/class/template.php#L23-L298" target="_blank">/html/class/template.php#L23-L298</a></code>


## Rendering Process


The rendering process involves several steps from receiving a request to outputting the final HTML. The XCL controller manages this flow, creating appropriate render targets, populating them with content, and using the render system to produce HTML.


<p align="center">
<svg xmlns="http://www.w3.org/2000/svg" id="xcl_legacy_render_process" aria-roledescription="sequence" class="xcl-diagram flowchart" style="max-width:1340.5px" viewBox="-50 -10 1340.5 1197"><rect width="158" height="65" x="1082.5" y="1111" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"></rect><text x="1161.5" y="1143.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="1161.5" dy="0">"Legacy_XoopsTpl"</tspan></text><rect width="150" height="65" x="882.5" y="1111" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"></rect><text x="957.5" y="1143.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="957.5" dy="0">"Render Target"</tspan></text><rect width="200" height="65" x="632.5" y="1111" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"></rect><text x="732.5" y="1143.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="732.5" dy="0">"Legacy_RenderSystem"</tspan></text><rect width="150" height="65" x="432.5" y="1111" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"></rect><text x="507.5" y="1143.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="507.5" dy="0">"Module"</tspan></text><rect width="165" height="65" x="200" y="1111" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"></rect><text x="282.5" y="1143.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="282.5" dy="0">"Legacy_Controller"</tspan></text><rect width="150" height="65" y="1111" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"></rect><text x="75" y="1143.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="75" dy="0">"Browser"</tspan></text><path id="actor84" stroke="#999" stroke-width=".5" d="M1161.5 65v1046" class="actor-line 200"></path><g id="root-84"><rect width="158" height="65" x="1082.5" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"></rect><text x="1161.5" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="1161.5" dy="0">"Legacy_XoopsTpl"</tspan></text></g><path id="actor83" stroke="#999" stroke-width=".5" d="M957.5 65v1046" class="actor-line 200"></path><g id="root-83"><rect width="150" height="65" x="882.5" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"></rect><text x="957.5" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="957.5" dy="0">"Render Target"</tspan></text></g><path id="actor82" stroke="#999" stroke-width=".5" d="M732.5 65v1046" class="actor-line 200"></path><g id="root-82"><rect width="200" height="65" x="632.5" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"></rect><text x="732.5" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="732.5" dy="0">"Legacy_RenderSystem"</tspan></text></g><path id="actor81" stroke="#999" stroke-width=".5" d="M507.5 65v1046" class="actor-line 200"></path><g id="root-81"><rect width="150" height="65" x="432.5" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"></rect><text x="507.5" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="507.5" dy="0">"Module"</tspan></text></g><path id="actor80" stroke="#999" stroke-width=".5" d="M282.5 65v1046" class="actor-line 200"></path><g id="root-80"><rect width="165" height="65" x="200" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"></rect><text x="282.5" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="282.5" dy="0">"Legacy_Controller"</tspan></text></g><path id="actor79" stroke="#999" stroke-width=".5" d="M75 65v1046" class="actor-line 200"></path><g id="root-79"><rect width="150" height="65" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"></rect><text x="75" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="75" dy="0">"Browser"</tspan></text></g><defs><marker id="arrowhead" markerHeight="12" markerUnits="userSpaceOnUse" markerWidth="12" orient="auto-start-reverse" refX="7.9" refY="5"><path d="m-1 0 11 5-10 5z"></path></marker></defs><text x="177" y="80" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">HTTP Request</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M76 117h202.5" class="messageLine0" style="fill:none"></path><text x="284" y="132" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">executeHeader()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 169c60-10 60 30 0 20" class="messageLine0" style="fill:none"></path><text x="394" y="214" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">execute module logic</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 251h220" class="messageLine0" style="fill:none"></path><text x="731" y="266" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">populate content</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M508.5 303h445" class="messageLine0" style="fill:none"></path><text x="284" y="318" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">executeView()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 355c60-10 60 30 0 20" class="messageLine0" style="fill:none"></path><text x="506" y="400" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">render(mainTarget)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 437h445" class="messageLine0" style="fill:none"></path><text x="946" y="452" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">assign values</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M733.5 489h424" class="messageLine0" style="fill:none"></path><text x="946" y="504" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">fetch template</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M733.5 541h424" class="messageLine0" style="fill:none"></path><text x="949" y="556" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">HTML content</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M1160.5 593h-424" class="messageLine1" style="stroke-dasharray:3,3;fill:none"></path><text x="844" y="608" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">setResult(HTML)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M733.5 645h220" class="messageLine1" style="stroke-dasharray:3,3;fill:none"></path><text x="284" y="660" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">_executeViewTheme(mainTarget)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 697c60-10 60 30 0 20" class="messageLine0" style="fill:none"></path><text x="506" y="742" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">getThemeRenderTarget()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 779h445" class="messageLine0" style="fill:none"></path><text x="509" y="794" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">screenTarget</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M731.5 831h-445" class="messageLine1" style="stroke-dasharray:3,3;fill:none"></path><text x="619" y="846" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">setAttribute('xoops_contents', mainResult)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 883h670" class="messageLine0" style="fill:none"></path><text x="506" y="898" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">render(screenTarget)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 935h445" class="messageLine0" style="fill:none"></path><text x="946" y="950" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">fetch theme template</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M733.5 987h424" class="messageLine0" style="fill:none"></path><text x="949" y="1002" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">themed HTML</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M1160.5 1039h-424" class="messageLine1" style="stroke-dasharray:3,3;fill:none"></path><text x="405" y="1054" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">HTML Response</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M731.5 1091H79" class="messageLine1" style="stroke-dasharray:3,3;fill:none"></path></svg>
</p>


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L904-L940" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L107-L640</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L946-L991" target="_blank">/html/modules/legacy/kernel/Legacy_Controller.class.php#L946-L991</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L319-L358" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L319-L358</a></code>



## Render Targets

Render targets are objects that hold content to be rendered and metadata about how it should be rendered. Different types of render targets are used for different parts of the page.


<div class="table-wrapper">
<table><thead><tr><th>Target Type</th><th>Constant</th><th>Purpose</th></tr></thead><tbody><tr><td>Buffer</td><td>LEGACY_RENDER_TARGET_TYPE_BUFFER</td><td>Generic buffer for content</td></tr><tr><td>Theme</td><td>LEGACY_RENDER_TARGET_TYPE_THEME</td><td>Entire page theme rendering</td></tr><tr><td>Block</td><td>LEGACY_RENDER_TARGET_TYPE_BLOCK</td><td>Individual block rendering</td></tr><tr><td>Main</td><td>LEGACY_RENDER_TARGET_TYPE_MAIN</td><td>Main content area of the page</td></tr></tbody></table>
</div>


The render target system allows different parts of the page to be processed independently and then combined into the final output.

<p align="center">
<svg xmlns="http://www.w3.org/2000/svg" id="xcl_legacy_render_targets" aria-roledescription="flowchart-v2" class="xcl-diagram flowchart" style="max-width:620.215576171875px" viewBox="0 0 620.216 582"><marker id="xcl_legacy_render_targets_flowchart-v2-pointEnd" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="5" refY="5" viewBox="0 0 10 10"><path d="m0 0 10 5-10 5z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><g class="root"><g class="edgePaths"><path id="L_Controller_MainTarget_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="m276.378 57.636-28.264 6.894c-28.264 6.894-84.792 20.682-113.056 33.076C106.794 110 106.794 121 106.794 126.5v5.5" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Controller_BlockTargets_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="M369.184 62v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Controller_ThemeTarget_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="m461.156 62 21.006 6.167c21.005 6.166 63.017 18.5 84.023 35.333 21.006 16.833 21.006 38.167 21.006 59.5s0 42.667-8.106 59.113c-8.106 16.446-24.317 28.005-32.422 33.785l-8.106 5.78" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_MainTarget_RenderSystem_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="m88.069 190-4.277 6.167c-4.276 6.166-12.829 18.5-17.106 35.333-4.277 16.833-4.277 38.167-4.277 59.5s0 42.667 20.11 59.31c20.109 16.643 60.328 28.597 80.437 34.574l20.109 5.976" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_BlockTargets_RenderSystem_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="m334.931 190-7.824 6.167c-7.823 6.166-23.47 18.5-31.293 35.333s-7.823 38.167-7.823 59.5 0 42.667-.882 58.842c-.882 16.175-2.646 27.192-3.528 32.7l-.882 5.508" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_MainTarget_ThemeTarget_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="m145.37 190 8.811 6.167c8.811 6.166 26.432 18.5 66.949 31.448 40.517 12.949 103.93 26.513 135.636 33.296l31.707 6.782" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_BlockTargets_ThemeTarget_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="m407.761 190 8.811 6.167c8.81 6.166 26.432 18.5 38.457 30.255 12.025 11.756 18.453 22.933 21.668 28.522l3.214 5.589" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ThemeTarget_RenderSystem_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="M497.434 318v6.167c0 6.166 0 18.5-20.528 30.647-20.528 12.146-61.584 24.107-82.112 30.087l-20.528 5.98" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_HTML_0" marker-end="url(#xcl_legacy_render_targets_flowchart-v2-pointEnd)" d="M277.744 446v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="50.05" height="24" class="label" transform="translate(81.769 87)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>creates</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="50.05" height="24" class="label" transform="translate(344.16 87)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>creates</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="50.05" height="24" class="label" transform="translate(562.166 151)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>creates</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="85.662" height="24" class="label" transform="translate(19.578 279)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>rendered by</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="85.662" height="24" class="label" transform="translate(245.16 279)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>rendered by</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="139.512" height="24" class="label" transform="translate(128.478 215)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>content assigned to</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="139.512" height="24" class="label" transform="translate(390.869 215)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>content assigned to</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="85.662" height="24" class="label" transform="translate(454.603 343)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>rendered by</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="54.525" height="24" class="label" transform="translate(250.481 471)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>outputs</p></span></div></foreignObject></g></g><g class="nodes"><g id="flowchart-Controller-0" class="node default"><path d="M-92.806-27H92.807v54H-92.806z" class="basic label-container" transform="translate(369.184 35)"/><g class="label" transform="translate(306.378 23)"><rect/><foreignObject width="125.613" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_Controller</p></span></div></foreignObject></g></g><g id="flowchart-RenderSystem-1" class="node default"><path d="M-107.625-27h215.25v54h-215.25z" class="basic label-container" transform="translate(277.744 419)"/><g class="label" transform="translate(200.119 407)"><rect/><foreignObject width="155.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_RenderSystem</p></span></div></foreignObject></g></g><g id="flowchart-MainTarget-3" class="node default"><path d="M-98.794-27H98.794v54H-98.794z" class="basic label-container" transform="translate(106.794 163)"/><g class="label" transform="translate(38 151)"><rect/><foreignObject width="137.588" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Main Render Target</p></span></div></foreignObject></g></g><g id="flowchart-BlockTargets-5" class="node default"><path d="M-103.35-27h206.7v54h-206.7z" class="basic label-container" transform="translate(369.184 163)"/><g class="label" transform="translate(295.834 151)"><rect/><foreignObject width="146.7" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Block Render Targets</p></span></div></foreignObject></g></g><g id="flowchart-ThemeTarget-7" class="node default"><path d="M-105.05-27h210.1v54h-210.1z" class="basic label-container" transform="translate(497.434 291)"/><g class="label" transform="translate(422.384 279)"><rect/><foreignObject width="150.1" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Theme Render Target</p></span></div></foreignObject></g></g><g id="flowchart-HTML-19" class="node default"><path d="M-69.394-27H69.393v54H-69.394z" class="basic label-container" transform="translate(277.744 547)"/><g class="label" transform="translate(238.35 535)"><rect/><foreignObject width="78.787" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Final HTML</p></span></div></foreignObject></g></g></g></g></svg>
</p>


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderTarget.class.php#L10-L20" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderTarget.class.php#L10-L20</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L610-L640" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L610-L640</a></code>   



## Theme System

The theme system defines the overall layout and appearance of the site. Themes are selected based on configuration and accessed through the render system.


<p align="center">
<svg xmlns="http://www.w3.org/2000/svg" id="mermaid-sos6km9i75o" aria-roledescription="flowchart-v2" class="xcl-diagram flowchart" style="max-width:975.2374877929688px" viewBox="0 0 975.237 528"><marker id="mermaid-sos6km9i75o_flowchart-v2-pointEnd" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="5" refY="5" viewBox="0 0 10 10"><path d="m0 0 10 5-10 5z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><marker id="mermaid-sos6km9i75o_flowchart-v2-pointStart" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="4.5" refY="5" viewBox="0 0 10 10"><path d="m0 5 10 5V0z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><g class="root"><g class="clusters"><g id="subGraph0" class="cluster" data-look="classic"><path d="M255.675 136h711.563v384H255.675z"/><foreignObject width="116.162" height="24" class="cluster-label" transform="translate(553.375 136)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Theme Structure</p></span></div></foreignObject></g></g><g class="edgePaths"><path id="L_RenderSystem_ThemeTarget_0" marker-end="url(#mermaid-sos6km9i75o_flowchart-v2-pointEnd)" d="M115.625 62v107" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ThemeTarget_ThemeHTML_0" marker-end="url(#mermaid-sos6km9i75o_flowchart-v2-pointEnd)" d="m190.169 227 22.548 8.167c22.547 8.166 67.641 24.5 110.207 38.642 42.565 14.143 82.6 26.095 102.618 32.071l20.017 5.976" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ThemeHTML_Components_0" marker-end="url(#mermaid-sos6km9i75o_flowchart-v2-pointEnd)" d="M539.834 367v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Manifesto_ThemeHTML_0" marker-end="url(#mermaid-sos6km9i75o_flowchart-v2-pointEnd)" d="M420.675 239v6.167c0 6.166 0 18.5 10.894 30.518 10.894 12.017 32.683 23.72 43.577 29.571l10.894 5.851" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_CSS_ThemeHTML_0" marker-end="url(#mermaid-sos6km9i75o_flowchart-v2-pointEnd)" d="M658.994 227v8.167c0 8.166 0 24.5-10.894 38.518-10.895 14.017-32.683 25.72-43.577 31.571l-10.894 5.851" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_JS_ThemeHTML_0" marker-end="url(#mermaid-sos6km9i75o_flowchart-v2-pointEnd)" d="M849.775 227v8.167c0 8.166 0 24.5-29.451 38.748-29.451 14.248-88.352 26.41-117.803 32.492l-29.451 6.081" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="50.05" height="24" class="label" transform="translate(90.6 87)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>creates</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="31" height="24" class="label" transform="translate(309.953 264)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>uses</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="57.838" height="24" class="label" transform="translate(510.916 392)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>includes</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="50.888" height="24" class="label" transform="translate(395.231 264)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>defines</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="63.15" height="24" class="label" transform="translate(627.419 264)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>styled by</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="90.388" height="24" class="label" transform="translate(804.581 264)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>enhanced by</p></span></div></foreignObject></g></g><g class="nodes"><g id="flowchart-ThemeHTML-0" class="node default"><path d="M-129.319-27h258.637v54h-258.637z" class="basic label-container" transform="translate(539.834 340)"/><g class="label" transform="translate(440.516 328)"><rect/><foreignObject width="198.637" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>theme.html (Main Template)</p></span></div></foreignObject></g></g><g id="flowchart-Manifesto-1" class="node default"><path d="M-130-39h260v78h-260z" class="basic label-container" transform="translate(420.675 200)"/><g class="label" transform="translate(320.675 176)"><rect/><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table;white-space:break-spaces;line-height:1.5;max-width:200px;text-align:center;width:200px"><span class="nodeLabel"><p>manifesto.ini.php (Theme Definition)</p></span></div></foreignObject></g></g><g id="flowchart-CSS-2" class="node default"><path d="M-58.319-27H58.319v54H-58.319z" class="basic label-container" transform="translate(658.994 200)"/><g class="label" transform="translate(630.675 188)"><rect/><foreignObject width="56.638" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>style.css</p></span></div></foreignObject></g></g><g id="flowchart-Components-3" class="node default"><path d="M-109.55-27h219.1v54h-219.1z" class="basic label-container" transform="translate(539.834 468)"/><g class="label" transform="translate(460.284 456)"><rect/><foreignObject width="159.1" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Component Templates</p></span></div></foreignObject></g></g><g id="flowchart-JS-4" class="node default"><path d="M-82.463-27H82.462v54H-82.463z" class="basic label-container" transform="translate(849.775 200)"/><g class="label" transform="translate(797.313 188)"><rect/><foreignObject width="104.925" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>JavaScript Files</p></span></div></foreignObject></g></g><g id="flowchart-RenderSystem-5" class="node default"><path d="M-107.625-27h215.25v54h-215.25z" class="basic label-container" transform="translate(115.625 35)"/><g class="label" transform="translate(38 23)"><rect/><foreignObject width="155.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_RenderSystem</p></span></div></foreignObject></g></g><g id="flowchart-ThemeTarget-6" class="node default"><path d="M-105.05-27h210.1v54h-210.1z" class="basic label-container" transform="translate(115.625 200)"/><g class="label" transform="translate(40.575 188)"><rect/><foreignObject width="150.1" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Theme Render Target</p></span></div></foreignObject></g></g></g></g></svg>
</p>


The theme system in XCL is file-based, with themes stored in the themes directory. Each theme includes:

1. A main template file (theme.html)
2. A definition file (manifesto.ini.php)
3. CSS and JavaScript files
4. Component templates

The admin theme is separate from regular themes and is stored in `modules/legacy/admin/theme/`


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/themes/xcl_default/theme.html#L1-L308" target="_blank">/html/themes/xcl_default/theme.html#L1-L308</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/admin/theme/admin_theme.html#L1-L206" target="_blank">/html/modules/legacy/admin/theme/admin_theme.html#L1-L206</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/themes/xcl_default/manifesto.ini.php#L1-L23" target="_blank">/html/themes/xcl_default/manifesto.ini.php#L1-L23</a></code>


## Template Engine

XCL uses Smarty as its template engine, but extends it with custom functionality through `Legacy_XoopsTpl`.   
This class adds XCL-specific features and integrates with the context system.

<p align="center">
<svg xmlns="http://www.w3.org/2000/svg" id="mermaid-rtbkc40wz1j" aria-roledescription="class" class="xcl-diagram" style="max-width:632.28125px" viewBox="0 0 632.281 698"><defs><marker id="mermaid-rtbkc40wz1j_class-extensionStart" class="marker extension class" markerHeight="240" markerWidth="190" orient="auto" refX="18" refY="7"><path d="m1 7 17 6V1Z"/></marker></defs><defs><marker id="mermaid-rtbkc40wz1j_class-dependencyEnd" class="marker dependency class" markerHeight="28" markerWidth="20" orient="auto" refX="13" refY="7"><path d="m18 7-9 6 5-6-5-6Z"/></marker></defs><defs><marker id="mermaid-rtbkc40wz1j_class-lollipopStart" class="marker lollipop class" markerHeight="240" markerWidth="190" orient="auto" refX="13" refY="7"><circle cx="7" cy="7" r="6" fill="transparent" stroke="#000"/></marker></defs><g class="root"><g class="edgePaths"><path id="id_Smarty_XoopsTpl_1" marker-start="url(#mermaid-rtbkc40wz1j_class-extensionStart)" d="M140.691 200v53" class="edge-thickness-normal edge-pattern-solid relation"/><path id="id_XoopsTpl_Legacy_XoopsTpl_2" marker-start="url(#mermaid-rtbkc40wz1j_class-extensionStart)" d="M140.691 445v6.667c0 6.666 0 20 8.489 32.833 8.489 12.833 25.467 25.167 33.956 31.333l8.489 6.167" class="edge-thickness-normal edge-pattern-solid relation"/><path id="id_Legacy_RenderSystem_Legacy_XoopsTpl_3" marker-end="url(#mermaid-rtbkc40wz1j_class-dependencyEnd)" d="M473.831 448v6.167c0 6.166 0 18.5-7.68 30.245-7.68 11.746-23.04 22.904-30.72 28.483l-7.68 5.579" class="edge-thickness-normal edge-pattern-solid relation"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="31" height="24" class="label" transform="translate(458.331 473)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel" style="display:inline-block"><p>uses</p></span></div></foreignObject></g></g><g class="nodes"><g id="classId-Smarty-89" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-92.319-87H92.32V87H-92.32" transform="translate(140.69 95)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-92.319-87H92.32M-92.32-87H92.32m0 0V87m0-174V87m0 0H-92.32M92.32 87H-92.32m0 0V-87m0 174V-87" transform="translate(140.69 95)"/></g><g class="label-group text"><foreignObject width="53.9" height="24" class="label" style="font-weight:bolder" transform="translate(113.74 20)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:103px;text-align:center"><span class="nodeLabel markdown-node-label"><p>Smarty</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="133.688" height="24" class="label" transform="translate(60.372 98)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:194px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+assign(key, value)</p></span></div></foreignObject><foreignObject width="118.625" height="24" class="label" transform="translate(60.372 122)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:179px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+fetch(template)</p></span></div></foreignObject><foreignObject width="132.637" height="24" class="label" transform="translate(60.372 146)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:192px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+display(template)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-92.319-39H92.32M-92.32-39H92.32M-92.319-15H92.32M-92.32-15H92.32" class="divider" transform="translate(140.69 95)"/></g><g id="classId-XoopsTpl-90" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-132.69-87h265.38V87h-265.38" transform="translate(140.69 340)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-132.69-87h265.38m-265.38 0h265.38m0 0V87m0-174V87m0 0h-265.38m265.38 0h-265.38m0 0V-87m0 174V-87" transform="translate(140.69 340)"/></g><g class="label-group text"><foreignObject width="69.838" height="24" class="label" style="font-weight:bolder" transform="translate(105.772 265)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:116px;text-align:center"><span class="nodeLabel markdown-node-label"><p>XoopsTpl</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="184.063" height="24" class="label" transform="translate(20 343)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:251px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+xoops_setCaching(value)</p></span></div></foreignObject><foreignObject width="206.463" height="24" class="label" transform="translate(20 367)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:270px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+xoops_setDebugging(value)</p></span></div></foreignObject><foreignObject width="193.813" height="24" class="label" transform="translate(20 391)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:259px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+xoops_setTemplateDir(dir)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-132.69-39h265.38m-265.38 0h265.38M-132.69-15h265.38m-265.38 0h265.38" class="divider" transform="translate(140.69 340)"/></g><g id="classId-Legacy_XoopsTpl-91" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-137.716-84h275.432V84h-275.432" transform="translate(307.26 606)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-137.716-84h275.432m-275.432 0h275.432m0 0V84m0-168V84m0 0h-275.432m275.432 0h-275.432m0 0V-84m0 168V-84" transform="translate(307.26 606)"/></g><g class="label-group text"><foreignObject width="128.113" height="24" class="label" style="font-weight:bolder" transform="translate(243.205 534)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:177px;text-align:center"><span class="nodeLabel markdown-node-label"><p>Legacy_XoopsTpl</p></span></div></foreignObject></g><g class="members-group text"><foreignObject width="135.938" height="24" class="label" transform="translate(181.545 582)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:204px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-_mContextReserve</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="133.688" height="24" class="label" transform="translate(181.545 630)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:194px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+assign(key, value)</p></span></div></foreignObject><foreignObject width="187.375" height="24" class="label" transform="translate(181.545 654)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:254px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+get_template_vars(name)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-137.716-36h275.432m-275.432 0h275.432M-137.716 12h275.432m-275.432 0h275.432" class="divider" transform="translate(307.26 606)"/></g><g id="classId-Legacy_RenderSystem-92" class="node default"><g class="basic label-container"><path fill="#fff" stroke-width="0" d="M-150.45-108h300.9v216h-300.9" transform="translate(473.831 340)"/><path fill="none" stroke="#ddd" stroke-width="1.3" d="M-150.45-108h300.9m-300.9 0h300.9m0 0v216m0-216v216m0 0h-300.9m300.9 0h-300.9m0 0v-216m0 216v-216" transform="translate(473.831 340)"/></g><g class="label-group text"><foreignObject width="165.3" height="24" class="label" style="font-weight:bolder" transform="translate(391.181 244)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:219px;text-align:center"><span class="nodeLabel markdown-node-label"><p>Legacy_RenderSystem</p></span></div></foreignObject></g><g class="members-group text"><foreignObject width="84.838" height="24" class="label" transform="translate(335.381 292)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:144px;text-align:center"><span class="nodeLabel markdown-node-label"><p>-mXoopsTpl</p></span></div></foreignObject></g><g class="methods-group text"><foreignObject width="194.25" height="24" class="label" transform="translate(335.381 340)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:257px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+_commonPrepareRender()</p></span></div></foreignObject><foreignObject width="147.05" height="24" class="label" transform="translate(335.381 364)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:208px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+renderBlock(target)</p></span></div></foreignObject><foreignObject width="144.713" height="24" class="label" transform="translate(335.381 388)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:202px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+renderMain(target)</p></span></div></foreignObject><foreignObject width="157.238" height="24" class="label" transform="translate(335.381 412)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:215px;text-align:center"><span class="nodeLabel markdown-node-label"><p>+renderTheme(target)</p></span></div></foreignObject></g><path fill="none" stroke-width="1.3" d="M-150.45-60h300.9m-300.9 0h300.9M-150.45-12h300.9m-300.9 0h300.9" class="divider" transform="translate(473.831 340)"/></g></g></g></svg>
</p>


The template engine processes templates from several locations:

- Theme templates (in the theme directory)
- Module templates (stored in the database)
- System templates (in the modules directory)

The `Legacy_XoopsTpl` class synchronizes template variables with the XCube context system through the `_mContextReserve` property.





<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/class/template.php#L23-L179" target="_blank">/html/class/template.php#L23-L179</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L29-L98" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L29-L98</a></code>   



## Block Rendering

Blocks are modular content sections that can be positioned in different areas of a page. The rendering system manages block display positions and processes block content.

<div class="panzoom-schema">
<svg xmlns="http://www.w3.org/2000/svg" id="mermaid-iyg79nscej" aria-roledescription="flowchart-v2" class="xcl-diagram flowchart" style="max-width:1584.612548828125px" viewBox="0 0 1584.613 760"><marker id="mermaid-iyg79nscej_flowchart-v2-pointEnd" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="5" refY="5" viewBox="0 0 10 10"><path d="m0 0 10 5-10 5z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><g class="root"><g class="clusters"><g id="subGraph0" class="cluster" data-look="classic"><path d="M8 648h1568.613v104H8z"/><foreignObject width="105.075" height="24" class="cluster-label" transform="translate(739.769 648)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Block Positions</p></span></div></foreignObject></g></g><g class="edgePaths"><path id="L_Controller_BlockProcedure_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="m758.72 62-4.765 6.167c-4.765 6.166-14.294 18.5-14.702 30.305-.408 11.806 8.307 23.085 12.664 28.724l4.357 5.639" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Controller_BlockProcedure_2" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="m800.443 62 4.765 6.167c4.764 6.166 14.294 18.5 14.701 30.305.408 11.806-8.306 23.085-12.663 28.724l-4.357 5.639" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_BlockProcedure_BlockRenderTarget_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="M779.581 190v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_BlockRenderTarget_RenderSystem_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="M779.581 318v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_ThemeVars_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="M779.581 446v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ThemeVars_Left_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="m657.669 559.608-82.826 8.565c-82.826 8.565-248.478 25.696-331.304 40.428-82.826 14.732-82.826 27.066-82.826 36.732V669" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ThemeVars_CenterLeft_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="m657.669 571.271-33.26 6.622c-33.259 6.621-99.778 19.864-133.037 32.652s-33.259 25.122-33.259 34.788V669" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ThemeVars_Center_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="M779.581 574v95" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ThemeVars_CenterRight_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="m901.494 570.8 34.32 6.7c34.319 6.7 102.959 20.1 137.279 32.967 34.32 12.866 34.32 25.2 34.32 34.866V669" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ThemeVars_Right_0" marker-end="url(#mermaid-iyg79nscej_flowchart-v2-pointEnd)" d="m901.494 559.23 86.007 8.629c86.007 8.628 258.022 25.884 344.029 40.679 86.008 14.795 86.008 27.129 86.008 36.795V669" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="50.05" height="24" class="label" transform="translate(705.106 87)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>creates</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="107.75" height="24" class="label" transform="translate(775.156 87)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>_processBlock()</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="63.975" height="24" class="label" transform="translate(747.594 215)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>execute()</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="93.763" height="24" class="label" transform="translate(732.7 343)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>renderBlock()</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="70.05" height="24" class="label" transform="translate(744.556 471)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>assigns to</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="97.6" height="24" class="label" transform="translate(111.913 599)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>xoops_lblocks</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="104.988" height="24" class="label" transform="translate(405.619 599)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>xoops_clblocks</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="108.5" height="24" class="label" transform="translate(725.331 599)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>xoops_ccblocks</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="106.675" height="24" class="label" transform="translate(1054.075 599)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>xoops_crblocks</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="99.287" height="24" class="label" transform="translate(1367.894 599)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>xoops_rblocks</p></span></div></foreignObject></g></g><g class="nodes"><g id="flowchart-Controller-0" class="node default"><path d="M-92.806-27H92.807v54H-92.806z" class="basic label-container" transform="translate(779.581 35)"/><g class="label" transform="translate(716.775 23)"><rect/><foreignObject width="125.613" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_Controller</p></span></div></foreignObject></g></g><g id="flowchart-BlockProcedure-1" class="node default"><path d="M-112.531-27h225.063v54h-225.063z" class="basic label-container" transform="translate(779.581 163)"/><g class="label" transform="translate(697.05 151)"><rect/><foreignObject width="165.063" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_BlockProcedure</p></span></div></foreignObject></g></g><g id="flowchart-BlockRenderTarget-2" class="node default"><path d="M-99.956-27H99.957v54H-99.956z" class="basic label-container" transform="translate(779.581 291)"/><g class="label" transform="translate(709.625 279)"><rect/><foreignObject width="139.913" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Block Render Target</p></span></div></foreignObject></g></g><g id="flowchart-RenderSystem-3" class="node default"><path d="M-107.625-27h215.25v54h-215.25z" class="basic label-container" transform="translate(779.581 419)"/><g class="label" transform="translate(701.956 407)"><rect/><foreignObject width="155.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_RenderSystem</p></span></div></foreignObject></g></g><g id="flowchart-Left-12" class="node default"><path d="M-117.713-27h235.425v54h-235.425z" class="basic label-container" transform="translate(160.713 700)"/><g class="label" transform="translate(73 688)"><rect/><foreignObject width="175.425" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XOOPS_SIDEBLOCK_LEFT</p></span></div></foreignObject></g></g><g id="flowchart-CenterLeft-13" class="node default"><path d="M-129.688-27h259.375v54h-259.375z" class="basic label-container" transform="translate(458.113 700)"/><g class="label" transform="translate(358.425 688)"><rect/><foreignObject width="199.375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XOOPS_CENTERBLOCK_LEFT</p></span></div></foreignObject></g></g><g id="flowchart-Center-14" class="node default"><path d="M-141.781-27h283.563v54h-283.563z" class="basic label-container" transform="translate(779.581 700)"/><g class="label" transform="translate(667.8 688)"><rect/><foreignObject width="223.563" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table;white-space:break-spaces;line-height:1.5;max-width:200px;text-align:center;width:200px"><span class="nodeLabel"><p>XOOPS_CENTERBLOCK_CENTER</p></span></div></foreignObject></g></g><g id="flowchart-CenterRight-15" class="node default"><path d="M-136.05-27h272.1v54h-272.1z" class="basic label-container" transform="translate(1107.413 700)"/><g class="label" transform="translate(1001.363 688)"><rect/><foreignObject width="212.1" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table;white-space:break-spaces;line-height:1.5;max-width:200px;text-align:center;width:200px"><span class="nodeLabel"><p>XOOPS_CENTERBLOCK_RIGHT</p></span></div></foreignObject></g></g><g id="flowchart-Right-16" class="node default"><path d="M-124.075-27h248.15v54h-248.15z" class="basic label-container" transform="translate(1417.538 700)"/><g class="label" transform="translate(1323.463 688)"><rect/><foreignObject width="188.15" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XOOPS_SIDEBLOCK_RIGHT</p></span></div></foreignObject></g></g><g id="flowchart-ThemeVars-18" class="node default"><path d="M-121.912-27h243.825v54h-243.825z" class="basic label-container" transform="translate(779.581 547)"/><g class="label" transform="translate(687.669 535)"><rect/><foreignObject width="183.825" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Theme Template Variables</p></span></div></foreignObject></g></g></g></g></svg>
</div>


Blocks are rendered through a dedicated process in the controller:

1. The controller creates block procedures based on block configuration
2. Each block procedure executes to generate content
3. Block content is rendered through a block render target
4. Rendered blocks are assigned to theme template variables based on their position
5. The theme template places blocks in the appropriate locations


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L383-L465" target="_blank">/html/modules/legacy/kernel/Legacy_Controller.class.php#L383-L465</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L297-L313" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L297-L313</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L455-L469" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L455-L469</a></code>


## Cache Mechanism

The rendering system includes a caching mechanism to improve performance by storing rendered content and reusing it for subsequent requests.

<div class="panzoom-schema">
<svg xmlns="http://www.w3.org/2000/svg" id="mermaid-f1xne4uwxxs" aria-roledescription="flowchart-v2" class="xcl-diagram flowchart" style="max-width:1410.4375px" viewBox="0 0 1410.438 693.563"><marker id="mermaid-f1xne4uwxxs_flowchart-v2-pointEnd" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="5" refY="5" viewBox="0 0 10 10"><path d="m0 0 10 5-10 5z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><g class="root"><g class="clusters"><g id="subGraph0" class="cluster" data-look="classic"><path d="M198.25 8h1204.188v128H198.25z"/><foreignObject width="99.813" height="24" class="cluster-label" transform="translate(750.438 8)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Cache Control</p></span></div></foreignObject></g></g><g class="edgePaths"><path id="L_Start_CheckCache_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="M85.625 99v35c0 10.333 0 18.667 78.236 38.338s234.709 50.679 312.945 66.183l78.236 15.505" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_CheckCache_LoadCache_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="m668.196 309.135 12.928 12.905c12.927 12.904 38.783 38.713 51.711 62.285 12.928 23.571 12.928 44.904 12.928 64.238v75" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_CheckCache_GenerateContent_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="m586.342 309.135-13.095 12.905c-13.094 12.904-39.283 38.713-52.378 57.118-13.094 18.405-13.094 29.405-13.094 34.905v5.5" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_GenerateContent_CacheContent_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="M507.775 477.563v46" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_CacheContent_SendResponse_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="M507.775 581.563v4.166c0 4.167 0 12.5 8.924 20.567 8.924 8.066 26.771 15.865 35.695 19.765l8.924 3.9" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_LoadCache_SendResponse_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="M745.763 581.563v4.166c0 4.167 0 12.5-8.924 20.567-8.924 8.066-26.772 15.865-35.696 19.765l-8.924 3.9" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_CacheSetting_CheckCache_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="M344.675 99v35c0 10.333 0 18.667 36.588 36.734 36.589 18.067 109.765 45.869 146.353 59.77l36.589 13.9" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ModuleCaching_CheckCache_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="M626.769 99v35c0 10.333 0 18.667.07 26.417s.211 14.917.281 18.5l.07 3.584" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_BlockCaching_CheckCache_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="M927.438 111v25c0 8.333 0 16.667-39.343 34.917-39.342 18.25-118.027 46.417-157.369 60.5l-39.343 14.084" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_CachePolicy_CheckCache_0" marker-end="url(#mermaid-f1xne4uwxxs_flowchart-v2-pointEnd)" d="M1237.438 111v25c0 8.333 0 16.667-89.437 36.569-89.437 19.903-268.31 51.375-357.747 67.111l-89.436 15.736" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="22.6" height="24" class="label" transform="translate(734.463 438.563)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>Yes</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="21.35" height="24" class="label" transform="translate(497.1 374.563)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>No</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g></g><g class="nodes"><g id="flowchart-Start-0" class="node default"><path d="M-77.625-27h155.25v54h-155.25z" class="basic label-container" transform="translate(85.625 72)"/><g class="label" transform="translate(38 60)"><rect/><foreignObject width="95.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Page Request</p></span></div></foreignObject></g></g><g id="flowchart-CheckCache-1" class="node default"><path d="m626.769 349.563 81.782-81.781L626.769 186l-81.781 81.781z" class="label-container"/><g class="label" transform="translate(583.988 243.781)"><rect/><foreignObject width="85.563" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Cache Exists<br/>and Valid?</p></span></div></foreignObject></g></g><g id="flowchart-LoadCache-2" class="node default"><path d="M-106.063-27h212.125v54h-212.125z" class="basic label-container" transform="translate(745.763 554.563)"/><g class="label" transform="translate(669.7 542.563)"><rect/><foreignObject width="152.125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Load Cached Content</p></span></div></foreignObject></g></g><g id="flowchart-GenerateContent-3" class="node default"><path d="M-92.625-27h185.25v54h-185.25z" class="basic label-container" transform="translate(507.775 450.563)"/><g class="label" transform="translate(445.15 438.563)"><rect/><foreignObject width="125.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Generate Content</p></span></div></foreignObject></g></g><g id="flowchart-CacheContent-4" class="node default"><path d="M-81.925-27h163.85v54h-163.85z" class="basic label-container" transform="translate(507.775 554.563)"/><g class="label" transform="translate(455.85 542.563)"><rect/><foreignObject width="103.85" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Cache Content</p></span></div></foreignObject></g></g><g id="flowchart-SendResponse-5" class="node default"><path d="M-83.494-27H83.494v54H-83.494z" class="basic label-container" transform="translate(626.769 658.563)"/><g class="label" transform="translate(573.275 646.563)"><rect/><foreignObject width="106.988" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Send Response</p></span></div></foreignObject></g></g><g id="flowchart-CacheSetting-18" class="node default"><path d="M-111.425-27h222.85v54h-222.85z" class="basic label-container" transform="translate(344.675 72)"/><g class="label" transform="translate(263.25 60)"><rect/><foreignObject width="162.85" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>isEnableCacheFeature()</p></span></div></foreignObject></g></g><g id="flowchart-ModuleCaching-19" class="node default"><path d="M-120.669-27h241.338v54h-241.338z" class="basic label-container" transform="translate(626.769 72)"/><g class="label" transform="translate(536.1 60)"><rect/><foreignObject width="181.338" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>module-&gt;isEnableCache()</p></span></div></foreignObject></g></g><g id="flowchart-BlockCaching-20" class="node default"><path d="M-130-39h260v78h-260z" class="basic label-container" transform="translate(927.438 72)"/><g class="label" transform="translate(827.438 48)"><rect/><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table;white-space:break-spaces;line-height:1.5;max-width:200px;text-align:center;width:200px"><span class="nodeLabel"><p>blockProcedure-&gt;isEnableCache()</p></span></div></foreignObject></g></g><g id="flowchart-CachePolicy-21" class="node default"><path d="M-130-39h260v78h-260z" class="basic label-container" transform="translate(1237.438 72)"/><g class="label" transform="translate(1137.438 48)"><rect/><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table;white-space:break-spaces;line-height:1.5;max-width:200px;text-align:center;width:200px"><span class="nodeLabel"><p>mSetModuleCachePolicy-&gt;call()</p></span></div></foreignObject></g></g></g></g></svg>
</div>


The caching system works at multiple levels:

1. Block-level caching: Individual blocks can be cached independently
2. Module-level caching: Main content from a module can be cached
3. Page-level caching: Entire pages can be cached for anonymous users

The controller checks for cached content before rendering, and stores newly rendered content in the cache when appropriate.


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L402-L435" target="_blank">/html/modules/legacy/kernel/Legacy_Controller.class.php#L402-L435</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L867-L898" target="_blank">/html/modules/legacy/kernel/Legacy_Controller.class.php#L867-L898</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L932-L937" target="_blank">/html/modules/legacy/kernel/Legacy_Controller.class.php#L932-L937</a></code>


## Customization Points

The rendering system provides several ways to customize and extend its functionality:

### Delegates

Delegates allow modules to hook into various points in the rendering process.

<div class="table-wrapper">
<table><thead><tr><th>Delegate</th><th>Purpose</th></tr></thead><tbody><tr><td><code>Legacy_RenderSystem.SetupXoopsTpl</code></td><td>Customize Smarty template setup</td></tr><tr><td><code>Legacy_RenderSystem.BeginRender</code></td><td>Hook before rendering begins</td></tr><tr><td><code>Site.JQuery.AddFunction</code></td><td>Add jQuery functions to the page</td></tr><tr><td><code>Legacy.SetupModuleContextSuccess</code></td><td>Hook after module context is set up</td></tr></tbody></table>
</div>

## Theme Templates

Custom themes can completely change the layout and appearance of the site through theme templates.

### Template Overrides

Module templates can be overridden in the database or in theme directories, allowing for customization without modifying module code.

## Custom Render Targets
New render target types can be created for specialized rendering needs.


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L144-L148" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L144-L148</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L464-L464" target="_blank">/html/modules/legacy/kernel/Legacy_Controller.class.php#L464-L464</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L392-L434" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L392-L434</a></code>


## Integration with Legacy Controller

The Legacy controller orchestrates the rendering process, managing the interaction between modules, blocks, and the rendering system.

<p align="center">
<svg xmlns="http://www.w3.org/2000/svg" id="xcl_render_controller" aria-roledescription="sequence" class="xcl-diagram" style="max-width:1158px" viewBox="-50 -10 1158 1369"><rect width="200" height="65" x="858" y="1283" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"/><text x="958" y="1315.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="958" dy="0">&quot;Legacy_RenderSystem&quot;</tspan></text><rect width="150" height="65" x="658" y="1283" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"/><text x="733" y="1315.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="733" dy="0">&quot;Module&quot;</tspan></text><rect width="150" height="65" x="458" y="1283" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"/><text x="533" y="1315.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="533" dy="0">&quot;Module Handler&quot;</tspan></text><rect width="165" height="65" x="200" y="1283" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"/><text x="282.5" y="1315.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="282.5" dy="0">&quot;Legacy_Controller&quot;</tspan></text><rect width="150" height="65" y="1283" fill="#eaeaea" stroke="#666" class="actor actor-bottom" rx="3" ry="3"/><text x="75" y="1315.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="75" dy="0">&quot;Browser&quot;</tspan></text><path id="actor89" stroke="#999" stroke-width=".5" d="M958 65v1218" class="actor-line 200"/><g id="root-89"><rect width="200" height="65" x="858" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"/><text x="958" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="958" dy="0">&quot;Legacy_RenderSystem&quot;</tspan></text></g><path id="actor88" stroke="#999" stroke-width=".5" d="M733 65v1218" class="actor-line 200"/><g id="root-88"><rect width="150" height="65" x="658" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"/><text x="733" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="733" dy="0">&quot;Module&quot;</tspan></text></g><path id="actor87" stroke="#999" stroke-width=".5" d="M533 65v1218" class="actor-line 200"/><g id="root-87"><rect width="150" height="65" x="458" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"/><text x="533" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="533" dy="0">&quot;Module Handler&quot;</tspan></text></g><path id="actor86" stroke="#999" stroke-width=".5" d="M282.5 65v1218" class="actor-line 200"/><g id="root-86"><rect width="165" height="65" x="200" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"/><text x="282.5" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="282.5" dy="0">&quot;Legacy_Controller&quot;</tspan></text></g><path id="actor85" stroke="#999" stroke-width=".5" d="M75 65v1218" class="actor-line 200"/><g id="root-85"><rect width="150" height="65" fill="#eaeaea" stroke="#666" class="actor actor-top" rx="3" ry="3"/><text x="75" y="32.5" alignment-baseline="central" class="actor actor-box" dominant-baseline="central" style="text-anchor:middle;font-size:16px;font-weight:400"><tspan x="75" dy="0">&quot;Browser&quot;</tspan></text></g><path fill="#EDF2AE" stroke="#666" d="M257.5 447H758v42H257.5z" class="note"/><text x="508" y="452" alignment-baseline="middle" class="noteText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle"><tspan x="508">Module execution</tspan></text><text x="177" y="80" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">HTTP Request</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M76 117h202.5" class="messageLine0" style="fill:none"/><text x="284" y="132" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">executeCommon()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 169c60-10 60 30 0 20" class="messageLine0" style="fill:none"/><text x="284" y="214" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">setupModuleContext()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 251c60-10 60 30 0 20" class="messageLine0" style="fill:none"/><text x="406" y="296" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">getByDirname()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 333H529" class="messageLine0" style="fill:none"/><text x="409" y="348" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">module object</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M532 385H286.5" class="messageLine1" style="stroke-dasharray:3,3;fill:none"/><text x="506" y="400" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">startup()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 437H729" class="messageLine0" style="fill:none"/><text x="284" y="504" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">executeHeader()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 541c60-10 60 30 0 20" class="messageLine0" style="fill:none"/><text x="284" y="586" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">executeView()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 623c60-10 60 30 0 20" class="messageLine0" style="fill:none"/><text x="506" y="668" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">getRenderTarget()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 705H729" class="messageLine0" style="fill:none"/><text x="509" y="720" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">mainTarget</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M732 757H286.5" class="messageLine1" style="stroke-dasharray:3,3;fill:none"/><text x="619" y="772" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">render(mainTarget)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 809H954" class="messageLine0" style="fill:none"/><text x="284" y="824" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">_executeViewTheme(mainTarget)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 861c60-10 60 30 0 20" class="messageLine0" style="fill:none"/><text x="284" y="906" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">_mStrategy-&gt;getMainThemeObject()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 943c60-10 60 30 0 20" class="messageLine0" style="fill:none"/><text x="619" y="988" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">getThemeRenderTarget()</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 1025H954" class="messageLine0" style="fill:none"/><text x="622" y="1040" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">screenTarget</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M957 1077H286.5" class="messageLine1" style="stroke-dasharray:3,3;fill:none"/><text x="284" y="1092" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">screenTarget-&gt;setAttribute(&apos;xoops_contents&apos;, result)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 1129c60-10 60 30 0 20" class="messageLine0" style="fill:none"/><text x="619" y="1174" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">render(screenTarget)</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M283.5 1211H954" class="messageLine0" style="fill:none"/><text x="518" y="1226" alignment-baseline="middle" class="messageText" dominant-baseline="middle" dy="1em" style="font-size:16px;font-weight:400" text-anchor="middle">HTML Response</text><path stroke-width="2" marker-end="url(#arrowhead)" d="M957 1263H79" class="messageLine1" style="stroke-dasharray:3,3;fill:none"/></svg>
</p>


The controller handles:

1. Initialization of the environment
2. Loading the appropriate module
3. Executing module logic
4. Setting up render targets
5. Coordinating the rendering process
6. Sending the final output to the browser


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L904-L991" target="_blank">/html/modules/legacy/kernel/Legacy_Controller.class.php#L904-L991</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L490-L521" target="_blank">/html/modules/legacy/kernel/Legacy_Controller.class.php#L490-L521</a></code>   


## Header and Meta Information

The rendering system manages HTML headers and meta information, which are generated and passed to the theme template.


<p align="center">
<svg xmlns="http://www.w3.org/2000/svg" id="mermaid-7qx3vfj72qh" aria-roledescription="flowchart-v2" class="xcl-diagram flowchart" style="max-width:1481.362548828125px" viewBox="0 0 1481.363 504"><marker id="mermaid-7qx3vfj72qh_flowchart-v2-pointEnd" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="5" refY="5" viewBox="0 0 10 10"><path d="m0 0 10 5-10 5z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><g class="root"><g class="clusters"><g id="subGraph0" class="cluster" data-look="classic"><path d="M73.313 264h1400.05v104H73.313z"/><foreignObject width="123.588" height="24" class="cluster-label" transform="translate(711.544 264)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Meta Information</p></span></div></foreignObject></g></g><g class="edgePaths"><path id="L_RenderSystem_HeaderScript_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="M230.316 62v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_SEOSettings_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="m326.611 62 21.994 6.167c21.993 6.166 65.98 18.5 87.973 30.166C458.572 110 458.572 121 458.572 126.5v5.5" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_HeaderScript_Keywords_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="m198.725 190-7.215 6.167c-7.215 6.166-21.645 18.5-28.861 30.833-7.215 12.333-7.215 24.667-4.604 34.459 2.61 9.792 7.831 17.044 10.442 20.669l2.61 3.626" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_HeaderScript_Description_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="m294.259 190 14.604 6.167c14.604 6.166 43.813 18.5 58.417 30.833 14.604 12.333 14.604 24.667 23.143 34.724 8.538 10.057 25.614 17.837 34.152 21.727l8.539 3.891" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_SEOSettings_Keywords_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="m394.629 190-14.604 6.167c-14.605 6.166-43.813 18.5-58.418 30.833-14.604 12.333-14.604 24.667-23.142 34.724-8.538 10.057-25.615 17.837-34.153 21.727l-8.538 3.891" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_SEOSettings_Description_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="m533.522 172.294 73.527 9.118c73.528 9.117 220.583 27.353 294.111 42.637 73.528 15.284 73.528 27.618 9.486 40.741-64.041 13.124-192.124 27.038-256.165 33.995l-64.042 6.957" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_ThemeTemplate_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="m151.302 62-18.046 6.167c-18.046 6.166-54.139 18.5-72.185 35.333S43.025 141.667 43.025 163v202.5c0 14.833 0 27.167 95.89 42.526 95.889 15.36 287.668 33.745 383.558 42.938l95.889 9.193" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Keywords_ThemeTemplate_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="M192.875 343v27c0 10.333 0 22.667 70.916 37.6 70.917 14.933 212.75 32.466 283.666 41.232l70.917 8.767" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Description_ThemeTemplate_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="M496.013 343v27c0 10.333 0 22.667 20.416 34.922 20.416 12.256 61.249 24.434 81.665 30.523l20.417 6.089" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Robots_ThemeTemplate_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="M710.606 343v95" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Author_ThemeTemplate_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="M909.231 343v27c0 10.333 0 22.667-18.504 34.796-18.503 12.128-55.511 24.053-74.015 30.015l-18.504 5.962" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Copyright_ThemeTemplate_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="M1118.519 343v27c0 10.333 0 22.667-52.617 37.089-52.616 14.422-157.849 30.932-210.465 39.188l-52.617 8.255" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Social_ThemeTemplate_0" marker-end="url(#mermaid-7qx3vfj72qh_flowchart-v2-pointEnd)" d="M1345.844 343v27c0 10.333 0 22.667-90.499 37.951-90.5 15.285-271.498 33.52-361.997 42.638l-90.499 9.118" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="60.025" height="24" class="label" transform="translate(200.303 87)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>accesses</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="38.288" height="24" class="label" transform="translate(439.428 87)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>reads</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="60.463" height="24" class="label" transform="translate(125.203 215)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>provides</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="60.463" height="24" class="label" transform="translate(351.653 215)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>provides</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="49.3" height="24" class="label" transform="translate(282.353 215)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>default</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="49.3" height="24" class="label" transform="translate(950.038 215)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>default</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="70.05" height="24" class="label" transform="translate(8 215)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>assigns to</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="77.775" height="24" class="label" transform="translate(153.988 393)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>included in</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="77.775" height="24" class="label" transform="translate(457.125 393)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>included in</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="77.775" height="24" class="label" transform="translate(671.719 393)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>included in</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="77.775" height="24" class="label" transform="translate(870.344 393)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>included in</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="77.775" height="24" class="label" transform="translate(1079.631 393)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>included in</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="77.775" height="24" class="label" transform="translate(1306.956 393)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>included in</p></span></div></foreignObject></g></g><g class="nodes"><g id="flowchart-RenderSystem-0" class="node default"><path d="M-107.625-27h215.25v54h-215.25z" class="basic label-container" transform="translate(230.316 35)"/><g class="label" transform="translate(152.69 23)"><rect/><foreignObject width="155.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_RenderSystem</p></span></div></foreignObject></g></g><g id="flowchart-HeaderScript-1" class="node default"><path d="M-103.306-27h206.613v54h-206.613z" class="basic label-container" transform="translate(230.316 163)"/><g class="label" transform="translate(157.01 151)"><rect/><foreignObject width="146.613" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_HeaderScript</p></span></div></foreignObject></g></g><g id="flowchart-SEOSettings-2" class="node default"><path d="M-74.95-27h149.9v54h-149.9z" class="basic label-container" transform="translate(458.572 163)"/><g class="label" transform="translate(413.622 151)"><rect/><foreignObject width="89.9" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>SEO Settings</p></span></div></foreignObject></g></g><g id="flowchart-ThemeTemplate-3" class="node default"><path d="M-88.263-27H88.262v54H-88.263z" class="basic label-container" transform="translate(710.606 469)"/><g class="label" transform="translate(652.344 457)"><rect/><foreignObject width="116.525" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Theme Template</p></span></div></foreignObject></g></g><g id="flowchart-Keywords-8" class="node default"><path d="M-84.563-27H84.562v54H-84.563z" class="basic label-container" transform="translate(192.875 316)"/><g class="label" transform="translate(138.313 304)"><rect/><foreignObject width="109.125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>meta_keywords</p></span></div></foreignObject></g></g><g id="flowchart-Description-9" class="node default"><path d="M-90.45-27h180.9v54h-180.9z" class="basic label-container" transform="translate(496.013 316)"/><g class="label" transform="translate(435.563 304)"><rect/><foreignObject width="120.9" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>meta_description</p></span></div></foreignObject></g></g><g id="flowchart-Robots-10" class="node default"><path d="M-74.144-27H74.143v54H-74.144z" class="basic label-container" transform="translate(710.606 316)"/><g class="label" transform="translate(666.463 304)"><rect/><foreignObject width="88.287" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>meta_robots</p></span></div></foreignObject></g></g><g id="flowchart-Author-11" class="node default"><path d="M-74.481-27H74.482v54H-74.481z" class="basic label-container" transform="translate(909.231 316)"/><g class="label" transform="translate(864.75 304)"><rect/><foreignObject width="88.963" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>meta_author</p></span></div></foreignObject></g></g><g id="flowchart-Copyright-12" class="node default"><path d="M-84.806-27H84.807v54H-84.806z" class="basic label-container" transform="translate(1118.519 316)"/><g class="label" transform="translate(1063.712 304)"><rect/><foreignObject width="109.613" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>meta_copyright</p></span></div></foreignObject></g></g><g id="flowchart-Social-13" class="node default"><path d="M-92.519-27H92.518v54H-92.519z" class="basic label-container" transform="translate(1345.844 316)"/><g class="label" transform="translate(1283.325 304)"><rect/><foreignObject width="125.037" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Social Media Tags</p></span></div></foreignObject></g></g></g></g></svg>
</p>


The rendering system assigns various meta values to the template, including:

- Basic meta tags (keywords, description, robots)
- Author and copyright information
- Social media meta tags
- Webmaster verification tags


<span class="iconify" data-icon="mdi:github"></span> Sources: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/admin/actions/AdminRenderAction.class.php#L37-L74" target="_blank">/html/modules/legacyRender/admin/actions/AdminRenderAction.class.php#L37-L74</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L400-L434" target="_blank">/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L400-L434</a></code>   
<code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/themes/xcl_default/theme.html#L21-L55" target="_blank">/html/themes/xcl_default/theme.html#L21-L55</a></code> 


## Error Handling and Debugging

The rendering system includes support for debugging and error handling. When debugging is enabled, it shows additional information and the Smarty debug console.


<p align="center">
<svg xmlns="http://www.w3.org/2000/svg" id="mermaid-12kfisk6hnwg" aria-roledescription="flowchart-v2" class="xcl-diagram flowchart" style="max-width:825.1656494140625px" viewBox="0 0 825.166 656"><marker id="mermaid-12kfisk6hnwg_flowchart-v2-pointEnd" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="5" refY="5" viewBox="0 0 10 10"><path d="m0 0 10 5-10 5z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><marker id="mermaid-12kfisk6hnwg_flowchart-v2-circleEnd" class="marker flowchart-v2" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="11" refY="5" viewBox="0 0 10 10"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><g class="root"><g class="clusters"><g id="subGraph0" class="cluster" data-look="classic"><path d="M8 8h547.125v128H8z"/><foreignObject width="148.988" height="24" class="cluster-label" transform="translate(207.069 8)"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Debug Configuration</p></span></div></foreignObject></g></g><g class="edgePaths"><path id="L_Controller_Debugger_0" marker-end="url(#mermaid-12kfisk6hnwg_flowchart-v2-pointEnd)" d="m665.363 99-6.056 6.167c-6.055 6.166-18.167 18.5-24.223 30.833-6.056 12.333-6.056 24.667-23.968 36.79-17.912 12.123-53.737 24.035-71.649 29.992l-17.912 5.956" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Debugger_RenderSystem_0" marker-end="url(#mermaid-12kfisk6hnwg_flowchart-v2-pointEnd)" d="M436.563 264v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_Template_0" marker-end="url(#mermaid-12kfisk6hnwg_flowchart-v2-pointEnd)" d="M436.563 392v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Template_DebugOutput_0" marker-end="url(#mermaid-12kfisk6hnwg_flowchart-v2-pointEnd)" d="M436.563 520v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_Controller_ErrorLog_0" marker-end="url(#mermaid-12kfisk6hnwg_flowchart-v2-pointEnd)" d="m718.393 99 6.056 6.167c6.056 6.166 18.167 18.5 24.223 30.833 6.056 12.333 6.056 24.667 6.056 36.333V206" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_DebugMode_Debugger_0" marker-end="url(#mermaid-12kfisk6hnwg_flowchart-v2-pointEnd)" d="M173 111v27c0 10.333 0 22.667 27.774 35.578 27.774 12.911 83.322 26.399 111.096 33.143l27.774 6.745" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_PhpErrorReporting_Debugger_0" marker-end="url(#mermaid-12kfisk6hnwg_flowchart-v2-pointEnd)" d="M436.563 99v107" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="126.162" height="24" class="label" transform="translate(565.947 161)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>_setupDebugger()</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="167.8" height="24" class="label" transform="translate(352.662 289)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>isDebugRenderSystem()</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="186.813" height="24" class="label" transform="translate(343.156 417)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>xoops_setDebugging(true)</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="149.113" height="24" class="label" transform="translate(362.006 545)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>fetchDebugConsole()</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="85.238" height="24" class="label" transform="translate(712.11 161)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>displayLog()</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="56.85" height="24" class="label" transform="translate(144.575 161)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>controls</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="78.662" height="24" class="label" transform="translate(397.231 161)"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>affected by</p></span></div></foreignObject></g></g><g class="nodes"><g id="flowchart-Controller-0" class="node default"><path d="M-92.806-27H92.807v54H-92.806z" class="basic label-container" transform="translate(691.878 72)"/><g class="label" transform="translate(629.072 60)"><rect/><foreignObject width="125.613" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_Controller</p></span></div></foreignObject></g></g><g id="flowchart-Debugger-1" class="node default"><path d="M-93.031-27H93.032v54H-93.031z" class="basic label-container" transform="translate(436.563 237)"/><g class="label" transform="translate(373.531 225)"><rect/><foreignObject width="126.063" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_Debugger</p></span></div></foreignObject></g></g><g id="flowchart-RenderSystem-2" class="node default"><path d="M-107.625-27h215.25v54h-215.25z" class="basic label-container" transform="translate(436.563 365)"/><g class="label" transform="translate(358.938 353)"><rect/><foreignObject width="155.25" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_RenderSystem</p></span></div></foreignObject></g></g><g id="flowchart-Template-3" class="node default"><path d="M-89.95-27h179.9v54h-179.9z" class="basic label-container" transform="translate(436.563 493)"/><g class="label" transform="translate(376.612 481)"><rect/><foreignObject width="119.9" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_XoopsTpl</p></span></div></foreignObject></g></g><g id="flowchart-DebugOutput-11" class="node default"><path d="M-81.138-27H81.137v54H-81.138z" class="basic label-container" transform="translate(436.563 621)"/><g class="label" transform="translate(385.425 609)"><rect/><foreignObject width="102.275" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Debug Output</p></span></div></foreignObject></g></g><g id="flowchart-ErrorLog-13" class="node default"><path d="M-62.438-27H62.437v54H-62.438z" class="basic label-container" transform="translate(754.728 237)"/><g class="label" transform="translate(722.29 225)"><rect/><foreignObject width="64.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Error Log</p></span></div></foreignObject></g></g><g id="flowchart-DebugMode-14" class="node default"><path d="M-130-39h260v78h-260z" class="basic label-container" transform="translate(173 72)"/><g class="label" transform="translate(73 48)"><rect/><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table;white-space:break-spaces;line-height:1.5;max-width:200px;text-align:center;width:200px"><span class="nodeLabel"><p>debug_mode in xoopsConfig</p></span></div></foreignObject></g></g><g id="flowchart-PhpErrorReporting-15" class="node default"><path d="M-83.563-27H83.562v54H-83.563z" class="basic label-container" transform="translate(436.563 72)"/><g class="label" transform="translate(383 60)"><rect/><foreignObject width="107.125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>error_reporting</p></span></div></foreignObject></g></g></g></g></svg>
</p>

Debugging features include:

1. Smarty template debugging
2. Display of PHP errors (when enabled)
3. Custom error logging
4. Performance tracking

The debug level is configured in the site preferences and can be overridden for administrators.


---

### Key Takeaways

The XOOPSCube Legacy Rendering System provides a flexible, theme-based approach to generating HTML output. It integrates with the Smarty template engine and extends it with XCL-specific functionality. The system handles blocks, module content, and overall page layout through distinct render targets that are processed and combined to produce the final output.

The rendering system supports caching at multiple levels for performance optimization and provides numerous customization points through delegates and template overrides. The tight integration with the Legacy controller ensures proper coordination of the rendering process with module execution and other system components.
