

XCube integrates legacy system modules through a structured architecture that connects the core with module functionality.  
This integration is primarily managed by the `Legacy_Controller` class, which serves as a bridge between the XCube core and legacy modules.


<div class="panzoom-schema">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="xcl_xcube_module" aria-roledescription="flowchart-v2" class="xcl-diagram flowchart" style="max-width:1960.175048828125px" viewBox="0 0 1960.175 1250"><marker id="xcl_xcube_module_flowchart-v2-pointEnd" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="5" refY="5" viewBox="0 0 10 10"><path d="m0 0 10 5-10 5z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><marker id="xcl_xcube_module_flowchart-v2-pointStart" class="marker flowchart-v2" markerHeight="8" markerUnits="userSpaceOnUse" markerWidth="8" orient="auto" refX="4.5" refY="5" viewBox="0 0 10 10"><path d="m0 5 10 5V0z" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><marker id="xcl_xcube_module_flowchart-v2-circleEnd" class="marker flowchart-v2" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="11" refY="5" viewBox="0 0 10 10"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><marker id="xcl_xcube_module_flowchart-v2-circleStart" class="marker flowchart-v2" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="-1" refY="5" viewBox="0 0 10 10"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width:1;stroke-dasharray:1,0"/></marker><marker id="xcl_xcube_module_flowchart-v2-crossEnd" class="marker cross flowchart-v2" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="12" refY="5.2" viewBox="0 0 11 11"><use xlink:href="#reuse-0" class="arrowMarkerPath" style="stroke-width:2;stroke-dasharray:1,0"/></marker><marker id="xcl_xcube_module_flowchart-v2-crossStart" class="marker cross flowchart-v2" markerHeight="11" markerUnits="userSpaceOnUse" markerWidth="11" orient="auto" refX="-1" refY="5.2" viewBox="0 0 11 11"><use xlink:href="#reuse-0" class="arrowMarkerPath" style="stroke-width:2;stroke-dasharray:1,0"/></marker><g class="root"><g class="clusters"><g id="subGraph7" class="cluster" data-look="classic"><path d="M48.35 1138h250.212v104H48.35z"/><foreignObject width="117.175" height="24" class="cluster-label" transform="translate(114.869 1138)"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>External Systems</p></span></div></foreignObject></g><g id="subGraph6" class="cluster" data-look="classic"><path d="M8 186h1944.175v902H8z"/><foreignObject width="170.088" height="24" class="cluster-label" transform="translate(895.044 186)"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XOOPSCube Framework</p></span></div></foreignObject></g><g id="subGraph0" class="cluster" data-look="classic"><path d="M980.016 8h642.953v104H980.016z"/><foreignObject width="75.05" height="24" class="cluster-label" transform="translate(1263.967 8)"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Client Side</p></span></div></foreignObject></g><g id="subGraph5" class="cluster" data-look="classic"><path d="M28 830h290.913v233H28z"/><foreignObject width="74.65" height="24" class="cluster-label" transform="translate(136.131 830)"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Data Layer</p></span></div></foreignObject></g><g id="subGraph4" class="cluster" data-look="classic"><path d="M849.85 830h284.625v233H849.85z"/><foreignObject width="108.988" height="24" class="cluster-label" transform="translate(937.669 830)"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Module System</p></span></div></foreignObject></g><g id="subGraph3" class="cluster" data-look="classic"><path d="M1154.475 830h777.7v233h-777.7z"/><foreignObject width="104.4" height="24" class="cluster-label" transform="translate(1491.125 830)"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Render System</p></span></div></foreignObject></g><g id="subGraph2" class="cluster" data-look="classic"><path d="M338.913 676h490.938v258H338.913z"/><foreignObject width="103.113" height="24" class="cluster-label" transform="translate(532.825 676)"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy System</p></span></div></foreignObject></g><g id="subGraph1" class="cluster" data-look="classic"><path d="M915.566 419h515.725v361H915.566z"/><foreignObject width="83.588" height="24" class="cluster-label" transform="translate(1131.634 419)"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XCube Core</p></span></div></foreignObject></g></g><g class="edgePaths"><path id="L_Browser_MainFile_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m1200.394 77.977-24.11 5.671c-24.11 5.67-72.33 17.011-96.44 28.848s-24.11 24.171-24.11 36.504v58" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_MainFile_CoreInit_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="M1055.734 265v46" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_CoreInit_XCubeRoot_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="M1055.734 369v71" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_XCubeRoot_XCubeController_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="M1055.734 498v70" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_XCubeController_DelegateSystem_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m1060.927 626 .801 4.167c.801 4.166 2.404 12.5 3.205 20.833.801 8.333.801 16.667.801 24.333V697" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_XCubeController_LegacyController_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m1021.941 626-5.216 4.167c-5.215 4.166-15.645 12.5-20.86 20.833-5.215 8.333-5.215 16.667-74.138 27.856-68.923 11.19-206.77 25.236-275.693 32.259l-68.923 7.023" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_LegacyController_ControllerStrategy_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m475.133 755-.802 4.167c-.801 4.166-2.403 12.5-3.205 20.833-.801 8.333-.801 16.667-.801 25v46" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_LegacyController_ModuleHandler_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m563.279 755 12.801 4.167c12.802 4.166 38.405 12.5 51.206 20.833 12.802 8.333 12.802 16.667 12.802 25 0 8.333 0 16.667 40.134 26.761 40.134 10.094 120.402 21.95 160.537 27.877l40.134 5.928" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_LegacyController_RenderSystem_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m573.131 754.846 14.493 4.192c14.493 4.193 43.478 12.577 57.971 20.936 14.493 8.359 14.493 16.693 14.493 25.026 0 8.333 0 16.667 130.924 28.422 130.924 11.755 392.772 26.932 523.696 34.52l130.924 7.589" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_ThemeRender_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m1449.625 903.393-25.662 5.101c-25.663 5.102-76.988 15.304-102.65 24.572-25.663 9.267-25.663 17.601-25.663 25.267V980" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_AdminRender_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="M1557.25 909v71" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_Templates_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m1664.875 904.596 23.342 4.901c23.341 4.9 70.025 14.702 93.366 23.769 23.342 9.067 23.342 17.401 23.342 25.067V980" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_ModuleHandler_Modules_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="M992.163 909v71" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_LegacyController_DBFactory_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="m441.016 755-6.066 4.167c-6.066 4.166-18.199 12.5-24.265 20.833-6.066 8.333-6.066 16.667-6.066 25 0 8.333 0 16.667-19.468 25.213-19.467 8.545-58.401 17.304-77.869 21.683l-19.467 4.379" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_DBFactory_DBConnection_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="M173.456 909v71" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_DBConnection_Database_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="M173.456 1038v121" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/><path id="L_RenderSystem_Browser_0" marker-end="url(#xcl_xcube_module_flowchart-v2-pointEnd)" d="M1557.25 855V149c0-12.333 0-24.667-33.341-37.016-33.342-12.349-100.025-24.715-133.366-30.898l-33.341-6.182" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link"/></g><g class="edgeLabels"><g class="edgeLabel"><foreignObject width="98.313" height="24" class="label" transform="translate(1006.578 137)"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>HTTP Request</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="119.075" height="24" class="label" transform="translate(996.197 523)"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>setupController()</p></span></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="0" height="0" class="label"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"/></div></foreignObject></g><g class="edgeLabel"><foreignObject width="113.275" height="24" class="label" transform="translate(1500.613 459)"><div class="labelBkg" style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="edgeLabel"><p>HTML Response</p></span></div></foreignObject></g></g><g class="nodes"><g id="flowchart-Browser-0" class="node default"><path d="M1200.393 33h152.875v54h-152.875z" class="basic label-container"/><g class="label" transform="translate(1230.393 48)"><rect/><foreignObject width="92.875" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Web Browser</p></span></div></foreignObject></g></g><g id="flowchart-MainFile-1" class="node default"><path d="M982.078 211h147.313v54H982.078z" class="basic label-container"/><g class="label" transform="translate(1012.078 226)"><rect/><foreignObject width="87.313" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>mainfile.php</p></span></div></foreignObject></g></g><g id="flowchart-CoreInit-2" class="node default"><path d="M963.171 315h185.125v54H963.171z" class="basic label-container"/><g class="label" transform="translate(993.171 330)"><rect/><foreignObject width="125.125" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>cubecore_init.php</p></span></div></foreignObject></g></g><g id="flowchart-XCubeRoot-3" class="node default"><path d="M982.778 444h145.912v54H982.778z" class="basic label-container"/><g class="label" transform="translate(1012.778 459)"><rect/><foreignObject width="85.912" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XCube_Root</p></span></div></foreignObject></g></g><g id="flowchart-XCubeController-4" class="node default"><path d="M964.228 572h183.013v54H964.228z" class="basic label-container"/><g class="label" transform="translate(994.228 587)"><rect/><foreignObject width="123.013" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XCube_Controller</p></span></div></foreignObject></g></g><g id="flowchart-DelegateSystem-5" class="node default"><path d="M950.565 701h230.338v54H950.565z" class="basic label-container"/><g class="label" transform="translate(980.565 716)"><rect/><foreignObject width="170.338" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XCube_Delegate System</p></span></div></foreignObject></g></g><g id="flowchart-SessionManager-6" class="node default"><path d="M1230.903 701h165.388v54h-165.388z" class="basic label-container"/><g class="label" transform="translate(1260.903 716)"><rect/><foreignObject width="105.388" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XCube_Session</p></span></div></foreignObject></g></g><g id="flowchart-LegacyController-7" class="node default"><path d="M387.519 701h185.613v54H387.519z" class="basic label-container"/><g class="label" transform="translate(417.519 716)"><rect/><foreignObject width="125.613" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_Controller</p></span></div></foreignObject></g></g><g id="flowchart-ControllerStrategy-8" class="node default"><path d="M373.913 855h192.825v54H373.913z" class="basic label-container"/><g class="label" transform="translate(403.913 870)"><rect/><foreignObject width="132.825" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Controller Strategy</p></span></div></foreignObject></g></g><g id="flowchart-TextFilter-9" class="node default"><path d="M616.738 855h178.113v54H616.738z" class="basic label-container"/><g class="label" transform="translate(646.738 870)"><rect/><foreignObject width="118.113" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_TextFilter</p></span></div></foreignObject></g></g><g id="flowchart-RenderSystem-10" class="node default"><path d="M1449.625 855h215.25v54h-215.25z" class="basic label-container"/><g class="label" transform="translate(1479.625 870)"><rect/><foreignObject width="155.25" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Legacy_RenderSystem</p></span></div></foreignObject></g></g><g id="flowchart-ThemeRender-11" class="node default"><path d="M1189.475 984h212.35v54h-212.35z" class="basic label-container"/><g class="label" transform="translate(1219.475 999)"><rect/><foreignObject width="152.35" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Theme RenderSystem</p></span></div></foreignObject></g></g><g id="flowchart-AdminRender-12" class="node default"><path d="M1451.825 984h210.85v54h-210.85z" class="basic label-container"/><g class="label" transform="translate(1481.825 999)"><rect/><foreignObject width="150.85" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Admin RenderSystem</p></span></div></foreignObject></g></g><g id="flowchart-Templates-13" class="node default"><path d="M1712.675 984h184.5v54h-184.5z" class="basic label-container"/><g class="label" transform="translate(1742.675 999)"><rect/><foreignObject width="124.5" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Smarty Templates</p></span></div></foreignObject></g></g><g id="flowchart-ModuleHandler-14" class="node default"><path d="M884.85 855h214.625v54H884.85z" class="basic label-container"/><g class="label" transform="translate(914.85 870)"><rect/><foreignObject width="154.625" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XoopsModuleHandler</p></span></div></foreignObject></g></g><g id="flowchart-Modules-15" class="node default"><path d="M931.538 984h121.25v54h-121.25z" class="basic label-container"/><g class="label" transform="translate(961.538 999)"><rect/><foreignObject width="61.25" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Modules</p></span></div></foreignObject></g></g><g id="flowchart-DBFactory-16" class="node default"><path d="M63 855h220.913v54H63z" class="basic label-container"/><g class="label" transform="translate(93 870)"><rect/><foreignObject width="160.913" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>XoopsDatabaseFactory</p></span></div></foreignObject></g></g><g id="flowchart-DBConnection-17" class="node default"><path d="M68.012 984h210.887v54H68.012z" class="basic label-container"/><g class="label" transform="translate(98.012 999)"><rect/><foreignObject width="150.887" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>Database Connection</p></span></div></foreignObject></g></g><g id="flowchart-Database-18" class="node default"><path d="M83.35 1163h180.213v54H83.35z" class="basic label-container"/><g class="label" transform="translate(113.35 1178)"><rect/><foreignObject width="120.213" height="24"><div style="display:table-cell;white-space:nowrap;line-height:1.5;max-width:200px;text-align:center"><span class="nodeLabel"><p>MySQL Database</p></span></div></foreignObject></g></g></g></g></svg>
</div>


### Core Integration Components

The integration of legacy system modules in XCube is built around several key components:

1. Legacy_Controller: The central component that manages the integration of legacy modules with the XCube core    
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L38-L42" target="_blank">/legacy/kernel/Legacy_Controller.class.php#L38-L42</a></code>

2. System Modules Configuration: Defined in the site configuration file, specifying which modules are considered system modules  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/xoops_trust_path/settings/site_default.ini#L3-L4" target="_blank">/settings/site_default.ini#L3-L4</a></code>

3. Module Class Structure: The `Legacy_AbstractModule` class provides the interface for modules to interact with the controller  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Module.class.php#L12-L30" target="_blank">/legacy/kernel/Legacy_Module.class.php#L12-L30</a></code>

4. Render System Integration: The `Legacy_RenderSystem` connects modules with the rendering capabilities  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L101-L107" target="_blank">/legacyRender/kernel/Legacy_RenderSystem.class.php#L101-L107</a></code>

### Module Loading and Initialization Process

The integration process follows these steps:

1. System Module Identification: The system identifies required modules from the configuration  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/xoops_trust_path/settings/site_default.ini#L4" target="_blank">/settings/site_default.ini#L4</a></code>

2. Module Installation Check: The `Legacy_SystemModuleInstall` preload class checks if all required system modules are installed  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/preload/Primary/SystemModuleInstall.class.php#L15-L18" target="_blank">/legacy/preload/Primary/SystemModuleInstall.class.php#L15-L18</a></code>

3. Module Context Setup: The controller sets up the module context for execution  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L1505-L1523" target="_blank">/legacy/kernel/Legacy_Controller.class.php#L1505-L1523</a></code>

4. Module Execution: The controller executes the module's functionality  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacyRender/kernel/Legacy_RenderSystem.class.php#L904-L940" target="_blank">/legacyRender/kernel/Legacy_RenderSystem.class.php#L904-L940</a></code>



### Module-Controller Communication

The communication between modules and the controller is facilitated through:

1. Module Interface: Modules implement the `Legacy_AbstractModule` interface to communicate with the controller  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Module.class.php#L31-L39" target="_blank">/legacy/kernel/Legacy_Module.class.php#L31-L39</a></code>

2. Render Target System: Modules provide render targets that the controller uses to generate output  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Module.class.php#L225-L233" target="_blank">/legacy/kernel/Legacy_Module.class.php#L225-L233</a></code>

3. Module Attributes: Modules can store and retrieve data through the attributes system  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Module.class.php#L33-L38" target="_blank">/legacy/kernel/Legacy_Module.class.php#L33-L38</a></code>


### Rendering Integration

The rendering integration is a crucial part of how legacy modules work with XCube:

1. Render System Selection: Modules can specify which render system they use  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L244-L248" target="_blank">/legacy/kernel/Legacy_Controller.class.php#L244-L248</a></code>

2. Render Target Creation: The controller creates render targets for modules to populate with content  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L907-L908" target="_blank">/legacy/kernel/Legacy_Controller.class.php#L907-L908</a></code>

3. Theme Integration: The controller integrates module output with the selected theme  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Controller.class.php#L947-L971" target="_blank">/legacy/kernel/Legacy_Controller.class.php#L947-L971</a></code>


### System Module Installation

When system modules are missing, XCube provides an automatic installation mechanism:

1. Detection: The Legacy_SystemModuleInstall preload detects missing system modules  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/preload/Primary/SystemModuleInstall.class.php#L22-L25" target="_blank">/preload/Primary/SystemModuleInstall.class.php#L22-L25</a></code>


2. Installation Process: The preload can install missing modules automatically  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/preload/Primary/SystemModuleInstall.class.php#L55-L73" target="_blank">/legacy/preload/Primary/SystemModuleInstall.class.php#L55-L73</a></code>

3. Module Activation: After installation, modules are activated in the system  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/preload/Primary/SystemModuleInstall.class.php#L76-L86" target="_blank">/legacy/preload/Primary/SystemModuleInstall.class.php#L76-L86</a></code>


### Caching Mechanism

The integration includes a caching system to improve performance:

1. Cache Information: Modules can provide cache information to the controller:  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_Module.class.php#L302-L308" target="_blank">/legacy/kernel/Legacy_Module.class.php#L302-L308</a></code>

2. Cache Control: The controller manages the caching of module output Legacy_Controller.class.php:867-898

3. Cache Policy: Modules can define their caching policies:  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/kernel/Legacy_CacheInformation.class.php#L78-L81" target="_blank">/legacy/kernel/Legacy_CacheInformation.class.php#L78-L81</a></code>


### Module Installation Utilities

For system module installation, XCube provides utility classes:

1. Module Installer: Handles the installation of modules:  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/admin/class/ModuleInstallUtils.class.php#L258-L275" target="_blank">/legacy/admin/class/ModuleInstallUtils.class.php#L258-L275</a></code>


2. Module Updater: Manages the update process for modules:  
<span class="iconify" data-icon="mdi:github"></span> Source: <code><a href="https://github.com/xoopscube/legacy/blob/7f33bc98/html/modules/legacy/admin/class/ModuleUpdater.class.php#L18-L49" target="_blank">/legacy/admin/class/ModuleUpdater.class.php#L18-L49</a></code>

---

### Key Takeaways

The integration of legacy system modules in XCube is a complex system that provides backward compatibility with XOOPS 2.x modules while offering enhanced functionality. 

The `Legacy_Controller` class serves as the main bridge between the XCube framework and legacy modules, managing their lifecycle and integration with the rendering system. The system modules defined in the configuration file are essential for the core functionality of the platform.